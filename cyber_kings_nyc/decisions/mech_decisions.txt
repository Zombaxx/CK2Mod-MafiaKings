decisions = {
	acquire_mech_license = {
		is_high_prio = yes
		potential = {
			age = 14
			OR = {
				religion = taoist
				any_neighbor_independent_ruler = {
					religion = taoist
						}
			}

		}
		allow = {
			in_command = no
			age = 14
			prisoner = no
			wealth = 75
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { trait = severely_injured }
			NOT = { trait = mech_pilot }
		}
		effect = { 
				character_event = { id = buy_mech.1 } 
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.02
				NOT = { religion = taoist }
			} 
			modifier = {
				factor = 0.25
				NOT = { learning = 8 }
			} 
		}
	}	

	gift_mech_suit = {		
		ai_target_filter = close_relatives
		filter = all
		third_party_filter = artifacts
		ai_third_party_filter = artifacts
		third_party = FROM
		#only_rulers = yes
		
		from_potential = {
			has_artifact = common_mech_suit		
			
			#Ai Logic
			OR = {
				ai = no
				any_friend = { is_alive = yes }
			}
		}
		potential = {	
			OR = {
				dynasty = FROM	
				is_close_relative = FROM
				same_realm = FROM
			}
			NOT_mythical_creature_trigger = yes	
			NOT = { character = FROM }		

			#Ai Logic
			OR = {
				FROM = { ai = no }
				AND = {
					reverse_opinion = { who = FROM value = -49 }
					NOT = { any_friend = { is_alive = yes } }
					NOT = { has_artifact = common_mech_suit }
				}
			}				
		}
		third_party_potential = {
			FROMFROM = {
				artifact_type = common_mech_suit
			}
		}
		third_party_allow = {
			
		}
		allow = {
			FROM = {
				OR = {
					hidden_tooltip = { is_ruler = no }
					has_regent = no
					regent = { opinion = { who = ROOT value = 0 } }
				}
			}	
			NOT = { war_with = FROM }					
		}
		effect = {		
			FROM = {
				ROOT_FROMFROM = {
					#set_artifact_flag = previous_holder_@PREV
					save_event_target_as = dragon_egg_to_transfer
					tooltip = { transfer_artifact = { from = PREV to = ROOT } }
				} 
			}
			hidden_tooltip = { 
				letter_event = { id = suit_events.1 }
			}
			
			prestige = 50
			if = {
				limit = { dynasty = FROM }
				opinion = {
					who = FROM
					modifier = bestowed_mech_suit
					years = 10
				}
			}
			if = {
				limit = { NOT = { dynasty = FROM } }
				opinion = {
					who = FROM
					modifier = bestowed_mech_suit
					years = 10
					multiplier = 3
				}
				FROM = {
					prestige = -200
					any_dynasty_member = {
						limit = {
							is_alive = yes
							is_close_relative = FROM
							NOT = { character = FROM }
							NOT = { character = ROOT }
						}
						opinion = {
							who = FROM
							modifier = opinion_angry
							months = 60
						}									
					}
				}
			}
		}
		ai_check_interval = 4
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.08 # Slow it down a bit
			}
			modifier = {
				factor = 0.1
				FROM = { NOT = { age = 25 } }
			}
			modifier = {
				factor = 0.2
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 0.75
				is_primary_heir = yes
			}
			modifier = {
				factor = 1.66
				is_female = no
				FROM = {
					primary_title = {
						OR = {
							has_law = agnatic_succession
							has_law = cognatic_succession
						}
					}
				}
			}
			modifier = {
				factor = 1.66
				is_female = yes
				FROM = {
					primary_title = {
						OR = {
							has_law = enatic_succession
							has_law = enatic_cognatic_succession
						}
					}
				}
			}
			modifier = {
				factor = 2
				sibling = FROM
			}
			modifier = {
				factor = 5
				is_child_of = FROM
			}
			modifier = {
				factor = 0.2
				can_inherit_titles_trigger = no
			}
		}
	}	
	buy_mech_suit = {
		is_high_prio = yes
		potential = {
			age = 14
			OR = {
				religion = taoist
				any_neighbor_independent_ruler = {
					religion = taoist
						}
				capital_holding = {
						has_building = ca_applied_science_division
					}
			}

		}
		allow = {
			in_command = no
			OR = {
				trait = mech_pilot
				capital_holding = {
						has_building = ca_applied_science_division
					}
			}
			age = 14
			prisoner = no
			wealth = 200
			NOT = { has_artifact = mech_suit }
			NOT = { has_artifact = common_mech_suit }
			NOT = { has_artifact = super_mech_suit }
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { trait = severely_injured }
		}
		effect = { 
				character_event = { id = buy_mech.2 } 
			
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1 
			modifier = {
				factor = 0.02
				NOT = { religion = taoist }
			} 
		}
	}	
	
	buy_black_mech_suit = {
		is_high_prio = yes
		potential = {
			age = 14
			OR = {
				religion = taoist
				any_neighbor_independent_ruler = {
					religion = taoist
						}
				capital_holding = {
						has_building = ca_special_projects_division
					}
			}

		}
		allow = {
			in_command = no
			age = 14
			prisoner = no
			wealth = 150
			NOT = { has_artifact = mech_suit }
			NOT = { has_artifact = common_mech_suit }
			NOT = { has_artifact = super_mech_suit }
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { trait = severely_injured }
		}
		effect = { 
				character_event = { id = buy_mech.3 } 
			
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1 
			modifier = {
				factor = 0.05 #slow it down
				NOT = { religion = taoist }
			}
			modifier = {
				factor = 0.002 #We have access to better mech
				religion = taoist
			} 
		}
	}		

	buy_super_mech_suit = {
		is_high_prio = yes
		potential = {
			age = 14
			religion = taoist

		}
		allow = {
			in_command = no
			trait = mech_pilot
			age = 14
			prisoner = no
			wealth = 600
			NOT = { has_artifact = super_mech_suit }
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			NOT = { trait = severely_injured }
		}
		effect = { 
				character_event = { id = buy_mech.4 } 
			
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 100 

			modifier = {
				factor = 0.02
				martial < 12 
			}
		}
	}
}		